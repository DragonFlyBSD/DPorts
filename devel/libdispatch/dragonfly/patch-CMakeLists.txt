--- CMakeLists.txt.orig	2021-09-17 04:54:52 UTC
+++ CMakeLists.txt
@@ -101,7 +101,7 @@ set(USE_LIBDISPATCH_INIT_CONSTRUCTOR ${E
 
 option(ENABLE_DTRACE "enable dtrace support" "")
 
-if(CMAKE_SYSTEM_NAME STREQUAL Darwin OR CMAKE_SYSTEM_NAME STREQUAL FreeBSD)
+if(CMAKE_SYSTEM_NAME STREQUAL Darwin OR CMAKE_SYSTEM_NAME MATCHES "FreeBSD|DragonFly")
   set(ENABLE_INTERNAL_PTHREAD_WORKQUEUES_DEFAULT OFF)
 else()
   set(ENABLE_INTERNAL_PTHREAD_WORKQUEUES_DEFAULT ON)
@@ -237,7 +237,7 @@ if(CMAKE_SYSTEM_NAME STREQUAL Android)
   set(ENABLE_DTRACE_DEFAULT OFF)
 endif()
 
-if(CMAKE_SYSTEM_NAME STREQUAL FreeBSD)
+if(CMAKE_SYSTEM_NAME MATCHES "FreeBSD|DragonFly")
   add_compile_definitions($<$<OR:$<COMPILE_LANGUAGE:C>,$<COMPILE_LANGUAGE:CXX>>:_WITH_DPRINTF>)
 endif()
 
