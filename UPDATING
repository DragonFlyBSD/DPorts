This file documents some of the problems you may encounter when upgrading
your ports.  We try our best to minimize these disruptions, but sometimes
they are unavoidable.

You should get into the habit of checking this file for changes each time
you update your ports collection, before attempting any port upgrades.

20250327:
  AFFECTS: users of thunderbird
  AUTHOR: cmt@FreeBSD.org

  The mail/thunderbird port switched to Thunderbird's new release train,
  with frequent major releases (ca. 4-weeks-cycle). Users wanting to
  stay with the 128-releases for now and the ESR releases in general
  should switch to the mail/thunderbird-esr port.

20250325:
  AFFECTS: users of TeX*
  AUTHOR: bofh@FreeBSD.org

  TeX system has been updated to 2025 from 2024. Normal pkg upgrade or
  portmaster -a should handle all the upgrade properly. In case not please
  create a ticket or send a mail to tex@FreeBSD.org

  Previously users have reported to delete texlive-texmf prior to
  starting update, or pkg-static will indicate there is a conflict
  during the upgrade of texlive-base :

  # pkg remove texlive-texmf

20250321:
  AFFECTS: users of mail/oama
  AUTHOR: nivit@FreeBSD.org

  Starting from version 0.15, when the GPG backend is used the encrypted
  credentials are stored in the $XDG_STATE_HOME/oama directory.
  If the XDG_STATE_HOME environment variable is not set then it defaults to
  $HOME/.local/state.

  That is a breaking change! If you use the GPG backend you need to manually
  move your credential ~/.local/var/oama/*.oama files into the new directory.

20250316:
  AFFECTS: users of graphics/gdk-pixbuf2
  AUTHOR: vishwin@FreeBSD.org

  Loaders for ANI, BMP, ICNS, ICO, PNM, QTIF, TGA, XBM and XPM have
  been moved to a separate graphics/gdk-pixbuf-extra port. Install
  the aforementioned port if artefacts in those formats no longer
  load or otherwise cause errors, and report them so that
  USE_GNOME=gdkpixbufextra can be declared. Most should only need
  USE_GNOME=gdkpixbufextra:run, but for those also needing these
  loaders for build, leave out the :run.

20250315:
  AFFECTS: users of sysutils/snmp_exporter
  AUTHOR: lexi@hemlock.eden.le-fay.org

  BREAKING CHANGE: The new version of sysutils/snmp_exporter (0.28.0)
  introduces several breaking changes.  If you don't want to migrate yet,
  switch to the new port sysutils/snmp_exporter20 which contains the previous
  version (0.20.0).

  1. The exporter uses a new configuration file format for SNMP authentication,
  and configurations from the previous version will no longer work.  This
  applies regardless of whether you use the configuration generator or write
  the configuration by hand.

  For migration instructions, see:
    https://github.com/prometheus/snmp_exporter/blob/main/auth-split-migration.md

  2. Breaking changes were made affecting the 'synology', 'ddwrt' and
  'kemp_loadmaster' modules.  For migration instructions, see:
    https://github.com/prometheus/snmp_exporter/releases/tag/v0.27.0

  3. The sysUpTime metric has been removed from the if_mib module.  For
  migration instructions, see:
    https://github.com/prometheus/snmp_exporter/releases/tag/v0.28.0

  4. (FreeBSD-specific) The port no longer patches the generator to hardcode
  ${PREFIX}/etc in the paths used by snmp_exporter_generator.  If you were
  relying on this behaviour, you should update your scripts to specify the full
  pathname.

20250312:
  AFFECTS: users of net/samba4{19,20}
  AUTHOR: michaelo@FreeBSD.org

  The MANDOC option has been renamed to MANPAGES to match the option
  name with other ports and the description from Mk/bsd.options.desc.mk.

20250311:
  AFFECTS: users of databases/mongodb80
  AUTHOR: ronald@FreeBSD.org

  Added flavor mongodb80-armv80a.
  See item 20250217 for the rationale.

20250310:
  AFFECTS: users of www/wget2
  AUTHOR: michaelo@FreeBSD.org

  The default NGHTTP2 option has been renamed to HTTP2 to match the option
  name in ftp/curl and the description from Mk/bsd.options.desc.mk.

20250219:
  AFFECTS: users of comms/ser2net
  AUTHOR: rodrigo@FreeBSD.org

  ser2net 4.6.4 doesn't support 3.5.1 configuration who has to be
  converted over to use new YAML syntax.

  Please see the examples on ser2net.yaml sample configuration and
  read the ser2net.yaml manpage on how to configure the new version.
  Additional links and resources have been provided on the pkg-message.

20250217:
  AFFECTS: users of databases/mongodb70
  AUTHOR: ronald@FreeBSD.org

  MongoDB on non-LSE ARM CPUs like Raspberry Pi 4 works but is
  unsupported upstream and can give corruption on high concurrency.
  Please read https://jira.mongodb.org/browse/SERVER-71772 for details.

  Port mongodb70 is flavored to create two packages:
    mongodb70 and mongodb70-armv80a

  Please install mongodb70-armv80a on RPI4 or similar ARM systems as pkg
  mongodb70 will fail on runtime with unsupported instruction error.

20250208:
  AFFECTS: users of net-mgmt/netbox
  AUTHOR: kai@FreeBSD.org

  1. Please make sure that the PostgreSQL server for the NetBox instance is
     running version 13 or higher.  This is because PostgreSQL 12 reached
     its End of Life (EOL) on November 14, 2024 and was also removed from
     the ports tree at the beginning of 2025.

  2. Please also check the pkg-message and the changelogs for further info.

20250205:
  AFFECTS: users of www/gitlab
  AUTHOR: mfechner@FreeBSD.org

  Make sure you compare your /usr/local/www/gitlab/config/puma.rb with
  /usr/local/www/gitlab/config/puma.rb.sample and make sure you have the:
  require "logger"
  line in your puma.rb.
  This fixes an error:
  /usr/local/lib/ruby/gems/3.2/gems/activesupport-7.0.8.7/lib/active_support/logger_thread_safe_level.rb:12:in `<module:LoggerThreadSafeLevel>': uninitialized constant ActiveSupport::LoggerThreadSafeLevel::Logger (NameError)

    Logger::Severity.constants.each do |severity|

20250203:
  AFFECTS: users of x11/kde5 and x11/kde6
  AUTHOR: arrowd@FreeBSD.org

  All KDE ports were fully switched to Qt6/KF6. Plasma 5 ports were removed.
  KDE Applications were updated to 24.12.

  If you installed KDE via kde5 or kde6 packages, the upgrade path is

  # pkg remove -f kde[56] && pkg install kde

  If you installed KDE via the plasma5-plasma metapackage, the upgrade path

  # pkg remove -f plasma5-plasma && pkg install plasma6-plasma

  Running "pkg autoremove" after the upgrade would clean unused dependencies.

  For the uncommon cases of building on the host with synth, portmaster, etc.
  the idea stays roughly the same - replace every plasma5 package with its
  plasma6 counterpart.

20250131:
  AFFECTS: users of security/easy-rsa
  AUTHOR: mandree@FreeBSD.org

  easy-rsa (easyrsa) versions between 3.0.5 and 3.1.7 inclusively
  may have chosen the wrong, a weak, cipher (des-ede3-cbc) when
  encrypting the CA private keys with the build-ca command, when
  running on a system where openssl was OpenSSL 3.

  Such CA private keys should be re-encrypted with a stronger cipher
  in order to protect them better, after upgrading EasyRSA to 3.2.1.
  To that end, the   easyrsa set-pass ca    command can be used.

  Details: https://community.openvpn.net/openvpn/wiki/CVE-2024-13454

20250125:
  AFFECTS: users of www/apache24
  AUTHOR: brnrd@FreeBSD.org

  Apache 2.4.63 removed the (experimental, non-default) mod_tls module due
  to rustls-ffi API instability and it was moved to a standalone module.

  Users of the TLS option can use the new www/mod_tls port as a replacement.

  # pkg install ap24-mod_tls

20250111:
  AFFECTS: users of net/onedrive
  AUTHOR: hiroo.ono+freebsd@gmail.com

  The version 2.5.x introduces significant changes regarding how the
  integrity and validation of your data is determined and is not backwards
  compatible with v2.4.x.
  OneDrive Business Shared Folder Sync has been 100% re-written in v2.5.0.
  If you are using this feature, please read the new documentation
  carefully.
  The application function --download-only no longer automatically deletes
  local files. Please read the new documentation regarding this feature.

20250109:
  AFFECTS: users of www/kiwix-tools and devel/libkiwix
  AUTHOR: olce@FreeBSD.org

  Upstream released a new version (14.0.0) of kiwix-tools' dependency libkiwix
  that the latest release of kiwix-tools (unchanged at 3.7.0) does not
  support, and the devel/libkiwix port was updated to it by mistake.

  In order to fix the situation without reverting devel/libkiwix to 13.1.0 and
  bumping its PORTEPOCH, the new port devel/libkiwix13 has been created and
  www/kiwix-tools has been updated to depend on it rather than devel/libkiwix.
  This is expected to be temporary.

  As devel/libkiwix13 and devel/libkiwix conflict with each other, which
  apparently can confuse pkg (which proposes to delete www/kiwix-tools), users
  having www/kiwix-tools installed are advised to upgrade it first separately,
  e.g., by running:

  # pkg upgrade www/kiwix-tools

20250106:
  AFFECTS: users of comms/zigbee2mqtt
  AUTHOR: otis@FreeBSD.org

  There are possibly breaking changes, see
  https://github.com/Koenkk/zigbee2mqtt/discussions/24198 for full details.

  Users are STRONGLY advised to take backup of /var/db/z2m directory
  prior to the upgrade.

20241230:
  AFFECTS: users of net/xrdp-devel
  AUTHOR: meta@FreeBSD.org

  The port has been updated to the latest development snapshot.

  The directory for the config files has also changed from
  PREFIX/etc/xrdp to PREFIX/etc/xrdp-devel to prevent incompatible config
  files for net/xrdp and net/xrdp-devel from getting mixed up.

  When updating net/xrdp-devel from old versions, move the config files to
  the new directory.

20241224:
  AFFECTS: users of net/xrdp
  AUTHOR: meta@FreeBSD.org

  xrdp supports H.264 encoding in graphics remoting since v0.10.2.
  It reduces the amount of data transmitted over the network and provides
  a much smoother and more responsive experience compared to previous
  versions. When updating from older v0.10.x versions to v0.10.2, make
  sure to merge the new xrdp.ini with the old one because xrdp.ini has
  some new configuration parameters for H.264. See 20240704 if updating
  from v0.9.x.

  Furthermore, xrdp v0.10.2 supports running the xrdp daemon as an
  unprivileged user. See the xrdp.ini(5) man page for configuring xrdp to
  run as an unprivileged user. You can also check if xrdp is properly
  configured to run as an unprivileged user using the script located at:

    %%PREFIX%%/share/xrdp/xrdp-chkpriv

20241203:
  AFFECTS: users of deskutils/treesheets
  AUTHOR: eduardo@FreeBSD.org

  The binary have been renamed from treesheets to TreeSheets

  - https://github.com/aardappel/treesheets/pull/760

20241202:
  AFFECTS: users of net/gdrive
  AUTHOR: meta@FreeBSD.org

  The port net/gdrive has been updated to its successor product because
  the original upstream GitHub repo has been unmaintained & archived.

  Users upgrading from gdrive 2.x to 3.x need to reconfigure account
  credentials following the instructions provided by new upstream.

  - https://github.com/glotlabs/gdrive/blob/main/docs/basic_usage.md
  - https://github.com/glotlabs/gdrive/blob/main/docs/create_google_api_credentials.md

20241122
  AFFECTS: users of databases/couchdb3
  AUTHOR: dch@FreeBSD.org

  Users who installed or upgraded to CouchDB 3.3.3 *after* 2024-09-30, and
  who are also running 14.1-RELEASE or newer, will hit a nasty corruption bug,
  causing all CPUs to lock up, possibly crashing, and generating a lot of
  errors in log files.

  This bug is caused by corrupt docs after decompression, due to a clash
  between improved compiler optimisations in clang18, and a bug in snappy
  itself. Given the above symptoms, all affected users will have noticed.

  Upgrade to 3.4.2 in ports, to resolve this issue.

  Please read more about this issue here:
  https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=282217

20241115
  AFFECTS: users of filesystems/zrepl-dsh2dsh
  AUTHOR: dsh@bamus.cz

  Users upgrading from before 0.9.0 need to modify configuration file:

      %%PREFIX%%/etc/zrepl/zrepl.yml

  Please read more about this change here:
  https://github.com/dsh2dsh/zrepl?tab=readme-ov-file#breaking-changes

20241112
  AFFECTS: users of databases/prometheus-postgres-exporter
  AUTHOR: lexi@hemlock.eden.le-fay.org

  BREAKING CHANGE: In postgres_exporter 0.16.0 and later, the log message format
  has changed.  From the upstream release notes:

  The logging system has been replaced with log/slog from the stdlib.  This
  change is being made across the prometheus ecosystem.  The logging output has
  changed, but the messages and levels remain the same.  The ts label for the
  timestamp has been replaced with time, the accuracy is less, and the timezone
  is not forced to UTC.  The caller field has been replaced by the source field,
  which now includes the full path to the source file. The level field now
  exposes the log level in capital letters.

20241110
  AFFECTS: users of devel/apr1 and www/apache24
  AUTHOR: brnrd@FreeBSD.org

  The default BerkeleyDB provider for apr-util was changed from BerkeleyDB
  5 (deprecated) to BerkeleyDB 1 from base libc. The change of version
  results in a non-compatible database format.

  After upgrading, you must rebuild all BerkeleyDB databases used by
  apr-util (example: Apache databases created with `httxt2dbm -F db`

20241109:
  AFFECTS: all users of i386
  AUTHOR: asomers@FreeBSD.org

  On i386 the lang/rust port has been updated to require SSE2 by default.  Not
  only does the compiler itself require SSE2, but it unconditionally generates
  code that requires it, too.  Over 500 ports include Rust code (www/firefox,
  security/py-cryptography, etc).  Official binary packages of all of those
  ports will no longer work on Pentium III and older hardware.  PIII users must
  now build their own lang/rust packages, clearing the SSE2 option, and rebuild
  any dependent ports.

20241104:
  AFFECTS: users of mail/fetchmail
  AUTHOR: chalpin@cs.wisc.edu

  OPIE and RPA have been made optional because both have significant security
  problems. OPIE support was not provided by the port on 14.x until the update
  to 6.5.0, when it was briefly re-activated. Because of its security flaws, it
  has now been disabled by default on both 13.x and 14.x.

  RPA is currently enabled by default, but this will change in a future update.

20241019:
  AFFECTS: users of security/libressl
  AUTHOR: brnrd@FreeBSD.org

  The port has been updated to the latest stable version 4.0 of LibreSSL.
  The shared library versions of the libraries have been bumped.

  After upgrading, manually update all packages that depend on any of the
  libraries provided by LibreSSL (libssl, libcrypto and libtls) since the
  versions of these libraries have changed. Normally, you can obtain the
  list of dependent software by running the following command:

  # pkg info -r libressl

  Then you should rebuild all ports depending on libressl to avoid dangling
  shared library dependencies.

20241004:
  AFFECTS: users of www/c-icap
  AUTHOR: rodrigo@FreeBSD.org

  The c-icap server version is moving from branch 5.X to 6.X.
  An in-place upgrade may require some changes in your current
  configuration.
  For installation instructions please refer :
  https://sourceforge.net/p/c-icap/wiki/configcicap
  https://sourceforge.net/p/c-icap/wiki

20240930:
  AFFECTS: users of sysutils/nq
  AUTHOR: 0mp@FreeBSD.org

  The nq upstream renamed the fq utility to nqtail
  and the tq utility to nqterm.

20240927:
  AFFECTS: users of databases/mongodb50
  AUTHOR: ronald@FreeBSD.org

  MongoDB version 5.0 is End of Life starting October 2024.
  Please make sure you are running MongoDB version 6.0 or higher.
  In-place upgrades are supported from version 5.0 to 6.0.
  For an in-place upgrade it is important that the
  'featureCompatibilityVersion' is set to 5.0.
  See: https://www.mongodb.com/docs/v6.0/release-notes/6.0-upgrade-standalone/#feature-compatibility-version

  TL;DR, run these commands in mongodb50 before upgrading:
  $ mongo --port <portnr>
  > db.adminCommand( { setFeatureCompatibilityVersion: "5.0" } )
  > exit

20240912:
  AFFECTS: security/clamav, security/clamav-lts
  AUTHOR: netchildFreeBSD.org

  The start scripts of clamav have been renamed to clamav_clamd,
  clamav_freshclam and clamav_milter for improved compatibility with
  other parts of the system. The automatic start at boot (rc.conf
  variable settings) is not affected, but if you have some other
  automatism you may want to change
    ".../etc/rc.d/clamav-clamd" to ".../etc/rc.d/clamav_clamd"
    ".../etc/rc.d/clamav-freshclam" to ".../etc/rc.d/clamav_freshclam"
    ".../etc/rc.d/clamav-milter" to ".../etc/rc.d/clamav_milter"
  or
    "service clamav-clamd ..." to "service clamav_clamd ..."
    "service clamav-freshclam" to "service clamav_freshclam ..."
    "service clamav-milter ..." to "service clamav_milter ..."

20240907:
  AFFECTS: www/tt-rss
  AUTHOR: dereks@lifeofadishwasher.com

  The ttrssd_local_db rc var has been removed in favor of using daemon's
  restart option -r to retry the ttrssd php scripts if database is not up
  before ttrssd starts.

20240829:
  AFFECTS: devel/binutils
  AUTHOR: cy@FreeBSD.org

  Historically devel/binutils would implicitly use devel/elfutils when
  it discovers it previously installed. This resulted in it depending on,
  though not explicitly if previously found, elfutils when built manually.
  This behavior has now changed. binutils will now disable any
  auto-dependency on elfutils. Users who build binutils manually and wish
  to have it depend on elfutls must now explicitly set the option when
  building binutils.

  There is no change to packages built by poudriere.

20240824:
  AFFECTS: dns/acme-dns
  AUTHOR: netchild@FreeBSD.org

  The start script of acme-dns has been renamed to acme_dns for improved
  compatibility with other parts of the system. The automatic start at
  boot (rc.conf variable settings) is not affected, but if you have some
  other automatism you may want to change
  ".../etc/rc.d/acme-dns" to ".../etc/rc.d/acme_dns"

20240816:
  AFFECTS: users of databases/redis
  AUTHOR: yasu@FreeBSD.org

  The databases/redis port has been updated to 7.4. Users wanting to
  stay on 7.2 can replace databases/redis with databases/redis72 with
  one of the following commands.

  If you use pkg with binary packages:
    # pkg set -o databases/redis:databases/redis72
    # pkg upgrade
  If you use portmaster:
    # portmaster -o databases/redis72 databases/redis
  If you use portupgrade:
    # portupgrade -o databases/redis72 databases/redis

  Keep in mind license term has changed with Redis 7.4. Now it is
  distributed under dual license of Redis Source Available License v2
  (RSALv2) and Server Side Public License v1 (SSPLv1). If you don't
  want to accept either of them, then Valkey (databases/valkey) may be
  alternative for you. It is fork of Redis 7.2 and distributed under
  3-clause BSD license that is same as Redis 7.2 and before.

20240815:
  AFFECTS: users of devel/subversion-lts and devel/subversion
  AUTHOR: michaelo@FreeBSD.org

  The port option STATIC has been broken since 2022-01 because textproc/utf8proc
  does not provide an archive with CMake. Therefore, it has been removed.

20240809:
  AFFECTS: sysutils/amavisd-new
  AUTHOR: netchildFreeBSD.org

  The start scripts of amavisd have been renamed to amavisd_snmp and
  amavis_p0fanalyzer for improved compatibility with other parts of the
  system. The automatic start at boot (rc.conf variable settings) is
  not affected, but if you have some other automatism you may want to
  change
    ".../etc/rc.d/amavisd-snmp" to ".../etc/rc.d/amavisd_snmp"
    ".../etc/rc.d/amavis-p0fanalyzer" to ".../etc/rc.d/amavis-p0fanalyzer"
  or
    "service amavisd-snmp ..." to "service amavisd_snmp ..."
    "service amavis-p0fanalyzer ..." to "service amavis_p0fanalyzer ..."

20240727:
  AFFECTS: lang/php8[123]
  AUTHOR: netchildFreeBSD.org

  The start scripts of php-fpm have been renamed to php_fpm for improved
  compatibility with other parts of the system. The automatic start at boot
  (rc.conf variable settings) is not affected, but if you have some other
  automatism you may want to change
    ".../etc/rc.d/php-fpm" to ".../etc/rc.d/php_fpm"
  or
    "service php-fpm ..." to "service php_fpm ..."

  If you have custom start scripts which depend upon php-fpm, you need to
  change the REQUIRE lines in them from "php-fpm" to "php_fpm".

20240726:
  AFFECTS: users of archivers/py-borgbackup
  AUTHOR: mandree@FreeBSD.org

  Borgbackup has been upgraded to version 1.4.0.
  The FreeBSD port as of 2024-07-26 reinstates FreeBSD 13 compatibility.

  For users who wish to continue using version 1.2,
  use either of these commands for upgrading:

  With binary packages through pkg:
    pkg set -o archivers/py-borgbackup:archivers/py-borgbackup12
    pkg upgrade

  With portmaster or portupgrade (replace the command accordingly):
    portmaster -o archivers/py-borgbackup12 archivers/py-borgbackup

20240723:
  AFFECTS: users of databases/postgresql* and other software using PostgreSQL to run
  AUTHOR: kbowling@FreeBSD.org

  The default version of PostgreSQL has been switched from 15 to 16.
  The upgrade procedure can use up twice the space the databases
  currently needs. If you have a big amount of stored data take a
  closer look at the manpage of pg_upgrade for avoidance and/or
  speedup of the upgrade.

  The upgrade instructions consider a basic usage and do not match
  complex scenarios like replication, sharding, or similar.

  Upgrade instructions:

  First stop your PostgreSQL, create PostgreSQL-binaries and backup your data.
  If you have another Version of PostgreSQL installed, for example 15, your
  files are named according to this.

  # service postgresql stop
  # pkg create postgresql15-server postgresql15-contrib
  # mkdir /tmp/pg-upgrade
  # tar xf postgresql15-server-15.7.pkg -C /tmp/pg-upgrade
  # tar xf postgresql15-contrib-15.7.pkg -C /tmp/pg-upgrade
  # pkg delete -f databases/postgresql15-server databases/postgresql15-contrib databases/postgresql15-client

  Now update PostgreSQL:

    pkg user:
    # pkg install databases/postgresql16-server databases/postgresql16-contrib
    # pkg upgrade

    Portmaster users:
    # portmaster databases/postgresql16-server databases/postgresql16-contrib
    # portmaster -a

    Portupgrade users:
    # portinstall databases/postgresql16-server databases/postgresql16-contrib
    # portupgrade -a

  After installing the new PostgreSQL version you need to convert
  all your databases to new version:

  # su -l postgres -c "/usr/local/bin/initdb --encoding=utf-8 --lc-collate=C -D /var/db/postgres/data16 -U postgres"
  # su -l postgres -c "pg_upgrade -b /tmp/pg-upgrade/usr/local/bin/ -d /var/db/postgres/data15/ -B /usr/local/bin/ -D /var/db/postgres/data16/ -U postgres "

  Now the migration is finished. You can start PostgreSQL again with:

  # service postgresql start

  ATTENTION:
  1) If you use non-default initdb options, you have to adjust the initdb-command accordingly

20240715:
  AFFECTS: net-mgmt/netbox
  AUTHOR: kai@FreeBSD.org

  The NetBox 4.0 release contains major changes, so at least the following
  items must be checked before proceeding with the upgrade:

  1. NetBox v4.0 requires Python 3.10 or later.

  2. Please also check the pkg-message and the changelogs for further info.

20240705:
  AFFECTS: sysutils/bacula*-{client,server}
  AUTHOR: netchildFreeBSD.org

  The start scripts of bacula have been renamed to bacula_fd, bacula_dir and
  bacula_sd for improved compatibility with other parts of the
  system. The automatic start at boot (rc.conf variable settings) is
  not affected, but if you have some other automatism you may want to
  change
    ".../etc/rc.d/bacula-fd"  to ".../etc/rc.d/bacula_fd"
    ".../etc/rc.d/bacula-dir" to ".../etc/rc.d/bacula_dir"
    ".../etc/rc.d/bacula-sd"  to ".../etc/rc.d/bacula_sd"
  or
    "service bacula-fd ..."  to "service bacula_fd ..."
    "service bacula-dir ..." to "service bacula_dir ..."
    "service bacula-sd ..."  to "service bacula_sd ..."

20240704:
  AFFECTS: net/xrdp and x11-drivers/xorgxrdp
  AUTHOR: meta@FreeBSD.org

  xrdp has been updated to the releases of the latest stable branch v0.10.
  This version significantly improves performance improvement especially if the
  client is Windows 11. There are to things to be careful about when updating.

  1) Make sure to update both net/xrdp and x11-drivers/xorgxrdp ports
     simultaneously.
  2) Config files require manual migration (follow the steps below).

  Review and backup changes you made to xrdp.ini and sesman.ini before updating
  xrdp. The following example only mentions xrdp.ini however make sure to do the
  same review, backup and migration for sesman.ini as well.

  Before updating xrdp, review and backup your changes.

  # cd /usr/local/etc/xrdp
  # diff -u xrdp.ini.sample xrdp.ini > xrdp.ini.diff

  After updating xrdp, migrate your changes to new configuration files.
  xrdp.ini.sample is replaced with new version at this point. See diff and
  manually apply changes.

  # cp xrdp.ini.sample xrdp.ini
  # vi xrdp.ini

20240620:
  AFFECTS: net-mgmt/net-snmp
  AUTHOR: markj@FreeBSD.org

  The snmpd and snmptrapd daemons now drop privileges by default when started
  using the rc scripts provided in the package.  Make sure that snmpd
  configuration in /usr/local/share/snmp is readable by the "snmpd" user.  If
  you have defined extension scripts in snmpd.conf, make sure that they can be
  executed by an unprivileged user.  To revert to the old behavior of always
  running as root, set snmpd_sugid="NO" or snmptrapd_sugid="NO" in /etc/rc.conf.

  See the snmpd rc script for a hint on how to debug any permission problems
  that might arise as a result of this change.

20240615:
  AFFECTS: mail/cyrus-imapd25
  AUTHOR: ume@FreeBSD.org

  The BDB option is disabled by default.

  If you are using the berkeley cyrusdb backend, we strongly recommend
  that you switch to something other than the berkeley cyrusdb
  backend.  If you want to continue using the berkeley cyrusdb
  backend, build the cyrus-imapd25 port yourself with the BDB option
  enabled.

20240613:
  AFFECTS: multimedia/audacious and multimedia/audacious-plugins
  AUTHOR: madpilot@FreeBSD.org

  Upstream project made qt6 the new default, so the port flavors have
  been updated to follow this change.

  If you are using the qt6 flavor, you should uninstall it and install
  the unflavored package. If you want to keep using the qt5 version it
  will be updated automatically to the qt6 version. If you should
  uninstall the unflavored package and instal the qt5 version.

20240606:
  AFFECTS: users of net-mgmt/unifi8
  AUTHOR: ronald@FreeBSD.org

  The default MongoDB version dependency has been switched from 5.0 to 6.0.
  Although MongoDB 5.0 -> MongoDB 6.0 datafiles in-place upgrade seem to
  work, users are strongly recommended to take full backup of unifi
  database prior to upgrade and start with clean installation afterwards.

  For an in-place upgrade it is important that the MongoDB
  'featureCompatibilityVersion' is set to 5.0.
  See: https://www.mongodb.com/docs/v6.0/release-notes/6.0-upgrade-standalone/#feature-compatibility-version
  Run these commands in mongodb50 before upgrading (e.g. while unifi is running):
  $ mongo --port 27117
  > db.adminCommand( { setFeatureCompatibilityVersion: "5.0" } )
  > exit

  See updating entry 20230310 for a backup/restore upgrade.

20240604:
  AFFECTS: net-mgmt/net-snmp
  AUTHOR: markj@FreeBSD.org

  The net-snmp port's newsyslog(8) configuration has been updated such
  that the snmpd log file will be owned by the snmpd user following log
  rotation.  This is done to make it easier to run snmpd as the snmpd
  user rather than as root, using the snmpd_sugid rc.conf option.
  For now snmpd still runs as root by default.  This is expected to change
  in the future.

20240529:
  AFFECTS: users of TeX*
  AUTHOR: bofh@FreeBSD.org

  TeX system has been updated to 2024 from 2023. Normal pkg upgrade or
  portmaster -a should handle all the upgrade properly. In case not please
  create a ticket or send a mail to tex@FreeBSD.org

  Previously users have reported to delete texlive-texmf prior to
  starting update, or pkg-static will indicate there is a conflict
  during the upgrade of texlive-base :

  # pkg remove texlive-texmf

20240529:
  AFFECTS: users of python
  AUTHOR: rm@FreeBSD.org

  The default version of python3 and python was switched to 3.11.

  For ports users wanting to keep version 3.9 as default,
  add DEFAULT_VERSIONS+= python=3.9 python3=3.9 to make.conf

  Following procedures may ease the upgrade:

  For users of pre-build packages:
  # sh
  # for i in $(pkg query -g %n 'py39-*'); do pkg set -yn ${i}:py311-${i#py39-}; done
  # pkg upgrade

  For portmaster users:
  # sh
  # portmaster -o lang/python311 python39
  # REINSTALL="$(pkg info -oq '*py39*')"
  # pkg delete -f "*py39*"
  # portmaster $REINSTALL
  # REBUILD=$(pkg query -g "%n:%dn" '*' | grep py3 | grep -v py311 | cut -d : -f 1 | sort -u)
  # portmaster $REBUILD
  # REBUILD2=$(pkg list | grep python-39 | xargs pkg which | awk '{print $6}' | sort -u)
  # portmaster $REBUILD2

  Final steps (for pre-built packages & portmaster):

  If no longer required, Python 3.9 can be removed via
  "pkg remove python39" and the directory /usr/local/lib/python3.9 can
  then be deleted afterwards, if not empty.

20240522:
  AFFECTS: net-p2p/transmission-daemon

  The web interface has been separated from the daemon port into its own port.
  This allows users of transmission-gtk and transmission-qt to install the web
  interface.

20240521:
  AFFECTS: www/gitlab
  AUTHOR: mfechner@FreeBSD.org

  Make sure you upgrade first to 16.11.x before you upgrade to the today
  released version 17.0.0.

  For more details see:
  https://gitlab.fechner.net/mfechner/Gitlab-docu/-/blob/master/update/16.11-17.0-freebsd.md

20240517:
  AFFECTS: comms/tio
  AUTHOR: diizzy@FreeBSD.org

  As of 3.1 upstream have reworked configuration file layout and syntax
  so older configurations will not work.

  For more details, see

  https://github.com/tio/tio/releases/tag/v3.1

20240513:
  AFFECTS: users of security/libressl
  AUTHOR: brnrd@FreeBSD.org

  The port has been updated to the latest stable version 3.9 of LibreSSL.
  The shared library versions of the libraries have been bumped.

  After upgrading, manually update all packages that depend on any of the
  libraries provided by LibreSSL (libssl, libcrypto and libtls) since the
  versions of these libraries have changed. Normally, you can obtain the
  list of dependent software by running the following command:

  # pkg info -r libressl

  Then you should rebuild all ports depending on libressl to avoid dangling
  shared library dependencies.

20240509:
  AFFECTS: databases/timescaledb
  AUTHOR: kbowling@FreeBSD.org

  The Foreign Key storage in hypertables has changed in an incompatible way,
  after runing ALTER EXTENSION, you must run the SQL script here:
  https://github.com/timescale/timescaledb-extras/blob/master/utils/2.15.X-fix_hypertable_foreign_keys.sql

  For more details, see

  https://github.com/timescale/timescaledb/pull/6797

20240508:
  AFFECTS: www/oauth2-proxy
  AUTHOR: netchild@FreeBSD.org

  The start script is converted to be instance aware.  To use it:
   - cp /usr/local/etc/oauth2-proxy.cfg.sample /usr/local/etc/oauth2-proxy-myapp.cfg
   - vi /usr/local/etc/oauth2-proxy-myapp.cfg
   - ln -s oauth2_proxy /usr/local/etc/rc.d/oauth2_proxy_myapp
   - sysctl oauth2_proxy_myapp_enable=YES
   - service oauth2_proxy_myapp start
  This allows to easily start multiple instances on the same system.

  As part of this, the start script was renamed to oauth2_proxy. This only
  affects manual restarts, no change in rc.conf is needed.

20240430:
  AFFECTS: audio/py-pyradio
  AUTHOR: nivit@FreeBSD.org

  The new version of Pyradio moves some data files to new locations.
  To see what it really does, run pyradio from a terminal the first time.
  Besides that, the recordings are moved/saved into ~/pyradio-recordings.
  You can change that directory in the config file.

  For more details, see

  https://github.com/coderholic/pyradio/releases/tag/0.9.3

20240423:
  AFFECTS: textproc/vale
  AUTHOR: bofh@FreeBSD.org

  When upgrading to v3.0.0, the vocabularies need to be moved from
  $StylesPath/Vocab to $StylesPath/config/vocabularies.

20240421:
  AFFECTS: www/gitlab-ce
  AUTHOR: mfechner@FreeBSD.org

  With the upgrade to version 16.11 the default path for gitlab-ce changed:
  /usr/local/www/gitlab-ce -> /usr/local/www/gitlab
  Make sure you follow the upgrade manual very carefully:
  https://gitlab.fechner.net/mfechner/Gitlab-docu/-/blob/master/update/16.10-16.11-freebsd.md

  The gitlab port also got a new flavor gitlab@ee to make the Gitlab
  Enterprise Edition available (you will need a license for it).
  Please note, that the ee flavor is a draft, but any feedback is welcome.
  See also the installation and upgrade manual for more details.
  https://gitlab.fechner.net/mfechner/Gitlab-docu/-/blob/master/install/16.11-freebsd.md

20240408:
  AFFECTS: users of databases/p5-DBD-mysql
  AUTHOR: flo@FreeBSD.org

  Upstream removed support for MariaDB from the 5.0 branch. So if you use
  MariaDB you need to use databases/p5-DBD-mysql4 from now on.

  Portmaster users:
        portmaster -o databases/p5-DBD-mysql4 databases/p5-DBD-mysql
        portmaster -a

  Portupgrade users:
        portupgrade -o databases/p5-DBD-mysql4 -f databases/p5-DBD-mysql
        portupgrade -a

